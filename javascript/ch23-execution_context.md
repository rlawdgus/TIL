## 소스코드 평가와 실행

    평가 과정에서 실행 컨텍스트를 생성하고 선언문 먼저 실행하여 생성된 식별자를 실행 컨텍스트가 관리하는 스코프에 등록한다.

    평가 과정 후 실행(이 때가 런타임)에 필요한 정보를 스코프에서 검색하고 값이 변경되거나 한 경우 다시 실행 컨텍스트가 관리하는 스코프에 등록한다.
    평가 과정에서 스코프에 등록이 되므로 호이스팅이 가능하다.

#

## 실행 컨텍스트 역할

-   전역 코드 평가 - var, function은 전역 객체의 프로퍼티와 메소드가 되고 let, const는 선언형 변수로 등록된다. 모든 실행이 끝나면 제거된다.
-   전역 코드 실행 - 순차적으로 실행 중 함수가 호출되면 일시 중단하고 함수 내부로 진입한다.
-   함수 코드 평가 - 함수 실행 컨텍스트가 생성되고 매개 변수, 지역 변수, arguments가 생성되어 스코프에 등록된다.
-   함수 코드 실행 - 실행이 끝나면 컨텍스트가 제거된다.
-   컨텍스트는 스택 구조로 관리된다.

#

## Lexical Env

    식별자와 그 값, 상위 스코프 참조를 기록하는 자료구조
    렉시컬 환경들은 단방향의 스코프 체인으로 되어 있어 상위 방향으로만 참조할 수 있다.

#

## 컨텍스트 구조

    코드 평가시 컨텍스트가 생성되고 여기에 렉시컬 환경이 생긴다.
    렉시컬 환경에 식별자, 값, 상위 스코프 참조 구조로 되어 있다.
    (컨텍스트는 실행 순서를 관리한다.(스택 구조로 관리))
    (전역 객체(빌트인 + 환경에 따라 Web API 또는 호스트 객체)의 경우 평가 전에 생선된다.)

    전역 컨텍스트의 렉시컬 환경에는 객체 환경과 선언형 환경이 있는데
    객체 환경에서 var, function으로 선언한 식별자들이 프로퍼티와 메소드로
    등록되고 이를 this로 접근할 수 있다.
    let, const로 선언한 식별자는 선언형 환경에 등록된다.
    전역 컨텍스트이므로 상위 스코프 참조는 없다.(null)

    함수 컨텍스트의 렉시컬 환경에는 매개 변수, arguments, 지역 변수가 등록된다.
    this는 함수 호출방식에 따라 다르다.
    상위 스코프는 정의된 곳으로 결정한다.

#

## 블록 레벨 스코프

    블록은 컨텍스트를 만들지 않는다.
    블록 내에서 선언된 식별자들은 블록 레벨 스코프를 만들고
    쓰던 스코프를 상위 스코프로 참조한다.

    ```javascript
    let x = 1;

    if(true) {
        let x = 10; // (**이 변수가 없었다면)
        console.log(x); // 10 (**상위 스코프의 x를 가져온다. // 1)
    }

    console.log(x); // 1
    ```

#

## var vs let, const

    var - 함수 레벨 스코프
    (선언 위치가 함수 내부면
    함수 내부에 있는 블록 내부에 선언되어도
    함수 안 어디서든 접근할 수 있다.)
    let, const - 블록 레벨 스코프

#

### 참고

-   [var vs let, const] https://www.youtube.com/watch?v=HsJ4oy_jBx0
